"use strict";(self["webpackChunkopensourcecasino"]=self["webpackChunkopensourcecasino"]||[]).push([[594],{594:(t,e,s)=>{s.r(e),s.d(e,{default:()=>M});var n=s(252),l=s(577);const o=t=>((0,n.dD)("data-v-1162b6f4"),t=t(),(0,n.Cn)(),t),a={id:"lastReward"},i={id:"slotSpace"},u={id:"options"},r=(0,n.Uk)("Spin"),d=o((()=>(0,n._)("h2",null,"Loot table",-1))),c=o((()=>(0,n._)("tr",null,[(0,n._)("th",null,"Result"),(0,n._)("th",null,"Theoretical Chance"),(0,n._)("th",null,"Reward")],-1))),h=o((()=>(0,n._)("td",null,"$$$",-1))),p=o((()=>(0,n._)("td",null,"original bet x 5",-1))),b=o((()=>(0,n._)("td",null,"777",-1))),f=o((()=>(0,n._)("td",null,"original bet x 7",-1)));function _(t,e,s,o,_,w){const g=(0,n.up)("Slot"),S=(0,n.up)("BetSelectButton"),m=(0,n.up)("PlayButton"),v=(0,n.up)("InfoSection");return(0,n.wg)(),(0,n.iD)("main",null,[(0,n._)("p",a,"Last reward: "+(0,l.zw)(_.lastReward),1),(0,n._)("div",i,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(_.slotAmount,(t=>((0,n.wg)(),(0,n.j4)(g,{slotValues:_.slotValues,ref_for:!0,ref:String("slot"+t),class:"slot"},null,8,["slotValues"])))),256))]),(0,n._)("div",u,[(0,n.Wm)(S,{bets:_.slotBets,id:"betSelect",ref:"betSelect"},null,8,["bets"]),_.buttonPresent?((0,n.wg)(),(0,n.j4)(m,{key:0,onClick:e[0]||(e[0]=t=>w.spinSlots(1))},{default:(0,n.w5)((()=>[r])),_:1})):(0,n.kq)("",!0)]),(0,n.Wm)(v,null,{default:(0,n.w5)((()=>[d,(0,n._)("table",null,[c,(0,n._)("tr",null,[h,(0,n._)("td",null,(0,l.zw)(1/Math.pow(this.slotValues.length,this.slotAmount)*100)+"%",1),p]),(0,n._)("tr",null,[b,(0,n._)("td",null,(0,l.zw)(1/Math.pow(this.slotValues.length,this.slotAmount)*100)+"%",1),f])])])),_:1})])}const w={ref:"slotValue",id:"slotValue"};function g(t,e,s,l,o,a){return(0,n.wg)(),(0,n.iD)("div",w,"$",512)}const S={props:["slotValues"],methods:{spin(t){const e=this.$refs.slotValue,s=this.$props.slotValues;return e.style.background="#d7ffc0",new Promise(((n,l)=>{function o(){if(t<=0)return e.style.background="#b4e995",n(e.innerText);e.innerText=s[Math.floor(Math.random()*s.length)],setTimeout(o,200,--t)}o()}))}}};var m=s(570);const v=(0,m.Z)(S,[["render",g],["__scopeId","data-v-6d00e5a2"]]),B=v,V={class:"spinButtonInside"};function $(t,e,s,l,o,a){return(0,n.wg)(),(0,n.iD)("button",{class:"spinButton",onClick:e[0]||(e[0]=(...t)=>a.playButtonSound&&a.playButtonSound(...t))},[(0,n._)("span",V,[(0,n.WI)(t.$slots,"default",{},void 0,!0)])])}const k={data(){return{buttonSound:new Audio("spin.mp3")}},methods:{playButtonSound(){this.buttonSound.play()}}},y=(0,m.Z)(k,[["render",$],["__scopeId","data-v-24bd2c03"]]),P=y,I=["value"],C={data(){return{value:this.$props.bets[0]}},methods:{changeValue(){this.value=this.$refs.betValue.value}}},D=Object.assign(C,{name:"BetSelectButton",props:{bets:{type:Array,required:!0}},setup(t){return(e,s)=>((0,n.wg)(),(0,n.iD)("select",{onChange:s[0]||(s[0]=(...t)=>e.changeValue&&e.changeValue(...t)),ref:"betValue"},[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.bets,(t=>((0,n.wg)(),(0,n.iD)("option",{value:t},(0,l.zw)(t),9,I)))),256))],544))}}),R=(0,m.Z)(D,[["__scopeId","data-v-18d4f67e"]]),A=R;function T(t,e,s,o,a,i){return(0,n.wg)(),(0,n.iD)("main",null,[(0,n._)("button",{id:"infoButton",onClick:e[0]||(e[0]=t=>a.visible=!a.visible)},"Info"),(0,n._)("div",{id:"infoContent",style:(0,l.j5)("display: "+(a.visible?"block":"none"))},[(0,n.WI)(t.$slots,"default",{},void 0,!0)],4)])}const z={data(){return{visible:!1}}},W=(0,m.Z)(z,[["render",T],["__scopeId","data-v-ab1be7ce"]]),Z=W,j={data(){return{amountWon:0,slotSpinTimes:10,slotAmount:3,spinning:!1,slotBets:[5e3,1e4,2e4],slotValues:["$","0","7","-","="],goodSlotValues:["$","7"],lastPlacedBet:0,lastReward:0,buttonPresent:!0}},components:{Slot:B,PlayButton:P,BetSelectButton:A,InfoSection:Z},methods:{spinSlots(t,e=[]){if(1==t){if(this.spinning)return;this.buttonPresent=!1,this.lastPlacedBet=Number(this.$refs.betSelect.$data.value),this.$emit("changePoints",-Number(this.$refs.betSelect.$data.value))}else if(t>this.slotAmount)return this.spinning=!1,this.calculateReward(e),void(this.buttonPresent=!0);this.spinning=!0,this.$refs["slot"+t][0].spin(this.slotSpinTimes).then((s=>{e.push(s),this.spinSlots(t+1,e)}))},calculateReward(t){const e=new Set(t);let s=0;if(this.hasGoodSlotValue(e)&&1===e.size)switch([...e][0]){case"7":s=7*this.lastPlacedBet;break;case"$":s=5*this.lastPlacedBet;break}this.lastReward=s,this.$emit("changePoints",s)},hasGoodSlotValue(t){let e=!1;return this.goodSlotValues.forEach((s=>{t.has(s)&&(e=!0)})),e}}},x=(0,m.Z)(j,[["render",_],["__scopeId","data-v-1162b6f4"]]),M=x}}]);
//# sourceMappingURL=594.27235db0.js.map