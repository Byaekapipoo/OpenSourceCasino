import{P as v,B as g,I as w}from"./InfoSection.d1cca977.js";import{_ as b,o as d,c as r,F as S,d as P,b as t,t as c,n as I,i as n,p as H,a as V,r as C,e as u,w as _,f as k,g as f}from"./index.9fb5ae98.js";const N={props:["cards","dealerHide"]},y=e=>(H("data-v-26954a1b"),e=e(),V(),e),x={class:"cardTable"},R={class:"cardContainer"},T={class:"upValue"},j={class:"downValue"},D={key:0,class:"cardContainer"},E=y(()=>t("div",{class:"upValue"},"?",-1)),A=y(()=>t("div",{class:"imgUnknown"},"?",-1)),J=y(()=>t("div",{class:"downValue"},"?",-1)),K=[E,A,J];function M(e,s,l,o,a,h){return d(),r("div",x,[(d(!0),r(S,null,P(l.dealerHide?l.cards.slice(0,1):l.cards,i=>(d(),r("div",R,[t("div",T,c(i.slice(2,4)),1),t("div",{class:"img",style:I(i[0]=="\u2666"||i[0]=="\u2665"?"color: red;":"color: black;")},c(i[0]),5),t("div",j,c(i.slice(2,4)),1)]))),256)),l.dealerHide?(d(),r("div",D,K)):n("",!0)])}const Q=b(N,[["render",M],["__scopeId","data-v-26954a1b"]]);const F={props:["points"],data(){return{playing:!1,selectedBet:0,lastReward:0,blackjackBets:[25e3,5e4],deckCards:["\u2660 10","\u2665 10","\u2666 10","\u2663 10","\u2660 2","\u2665 2","\u2666 2","\u2663 2","\u2660 3","\u2665 3","\u2666 3","\u2663 3","\u2660 4","\u2665 4","\u2666 4","\u2663 4","\u2660 5","\u2665 5","\u2666 5","\u2663 5","\u2660 6","\u2665 6","\u2666 6","\u2663 6","\u2660 7","\u2665 7","\u2666 7","\u2663 7","\u2660 8","\u2665 8","\u2666 8","\u2663 8","\u2660 9","\u2665 9","\u2666 9","\u2663 9","\u2660 A","\u2665 A","\u2666 A","\u2663 A","\u2660 J","\u2665 J","\u2666 J","\u2663 J","\u2660 Q","\u2665 Q","\u2666 Q","\u2663 Q","\u2660 K","\u2665 K","\u2666 K","\u2663 K"],dealerCards:[],playerCards:[],discardedCards:[],dealerHide:!0,playerHandValue:0,cardsInPlay:[],enableButtons:!0,dealerHandValue:-1,continueButtonEnabled:!1}},components:{PlayButton:v,BetSelectButton:g,BlackjackCardTable:Q,InfoSection:w},methods:{startGame(){this.selectedBet=Number(this.$refs.betSelect.$data.value),!(this.points-this.selectedBet<0)&&(this.$emit("changePoints",-this.selectedBet),this.playing=!0,this.giveDealerCards(),this.givePlayerCards())},hit(){this.playerHandValue>20||(this.playerCards.push(this.fetchCard()),this.playerHandValue=this.calculateHandValue(this.playerCards))},stand(){for(this.dealerHide=!1;this.calculateHandValue(this.dealerCards)<17;)this.dealerCards.push(this.fetchCard());const e=this.calculateHandValue(this.dealerCards);this.dealerHandValue=e;let s=this.selectedBet;this.playerHandValue>21&&e>21||(this.playerHandValue>21?s-=this.selectedBet:e>21?s+=this.selectedBet:this.playerHandValue>e?s+=this.selectedBet:e>this.playerHandValue&&(s-=this.selectedBet)),this.$emit("changePoints",s),this.lastReward=s,this.enableButtons=!1,this.continueButtonEnabled=!0},startNewRound(){this.points-this.selectedBet<0||(this.$emit("changePoints",-this.selectedBet),this.continueButtonEnabled=!1,this.dealerHandValue=-1,this.clearBothHands(),this.discardedCards=this.discardedCards.concat(this.cardsInPlay),this.cardsInPlay=[],this.giveDealerCards(),this.givePlayerCards(),this.enableButtons=!0)},calculateHandValue(e){let s=0,l=0;for(let o=0;o<e.length;o++){const a=e[o].slice(2,4);a=="A"?s++:isNaN(a)?l+=10:l+=Number(a)}return l+=s,l<=11&&s>0&&(l+=10),l},givePlayerCards(){this.playerCards.push(this.fetchCard()),this.playerCards.push(this.fetchCard()),this.playerHandValue=this.calculateHandValue(this.playerCards)},giveDealerCards(){this.dealerHide=!0,this.dealerCards.push(this.fetchCard()),this.dealerCards.push(this.fetchCard())},clearBothHands(){this.playerCards=[],this.dealerCards=[],this.playerHandValue=0},fetchCard(){this.deckCards.length==0&&(alert("Shuffling discarded cards back to the deck."),this.shuffleDiscardToDeck());let e=this.deckCards.splice(Math.floor(Math.random()*this.deckCards.length),1)[0];return this.cardsInPlay.push(e),e},shuffleDiscardToDeck(){this.deckCards=this.discardedCards,this.discardedCards=[];for(let e=this.deckCards.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1)),l=this.deckCards[e];this.deckCards[e]=this.deckCards[s],this.deckCards[s]=l}}}},G=e=>(H("data-v-3fb6a3f0"),e=e(),V(),e),L={id:"lastReward"},z={key:0,id:"options"},U={key:1,id:"game"},q={id:"options"},O=G(()=>t("table",null,[t("tr",null,[t("th",null,"Event"),t("th",null,"Reward")]),t("tr",null,[t("td",null,"Round start"),t("td",null,"-original bet")]),t("tr",null,[t("td",null,"Tie"),t("td",null,"original bet")]),t("tr",null,[t("td",null,"Failure"),t("td",null,"0")]),t("tr",null,[t("td",null,"Victory"),t("td",null,"selected bet x2")])],-1));function W(e,s,l,o,a,h){const i=C("BetSelectButton"),p=C("PlayButton"),B=C("BlackjackCardTable"),m=C("InfoSection");return d(),r("main",null,[t("p",L,"Last reward: "+c(a.lastReward),1),a.playing?n("",!0):(d(),r("div",z,[u(i,{bets:a.blackjackBets,id:"betSelect",ref:"betSelect"},null,8,["bets"]),u(p,{onClick:h.startGame},{default:_(()=>[f("Play")]),_:1},8,["onClick"])])),a.playing?(d(),r("div",U,[t("h1",null,c(a.dealerHandValue<0?"?":a.dealerHandValue),1),u(B,{dealerHide:a.dealerHide,cards:a.dealerCards},null,8,["dealerHide","cards"]),u(B,{dealerHide:!1,cards:a.playerCards},null,8,["cards"]),t("h1",null,c(a.playerHandValue),1),t("div",q,[a.enableButtons?(d(),k(p,{key:0,onClick:h.hit},{default:_(()=>[f("Hit")]),_:1},8,["onClick"])):n("",!0),a.enableButtons?(d(),k(p,{key:1,onClick:h.stand},{default:_(()=>[f("Stand")]),_:1},8,["onClick"])):n("",!0),a.continueButtonEnabled?(d(),k(p,{key:2,onClick:h.startNewRound},{default:_(()=>[f("Next Round")]),_:1},8,["onClick"])):n("",!0)])])):n("",!0),u(m,null,{default:_(()=>[O]),_:1})])}const Z=b(F,[["render",W],["__scopeId","data-v-3fb6a3f0"]]);export{Z as default};
