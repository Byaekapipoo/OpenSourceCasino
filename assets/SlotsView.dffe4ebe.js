import{_,o as l,c as u,b as n,r as m,F as v,d as S,t as p,e as w,n as x,f as d,g as h,w as g,h as A,i as I,j as B,p as P,a as k}from"./index.4aac71ec.js";const R={props:["slotValues"],methods:{spin(e){const t=this.$refs.slotValue,o=this.$props.slotValues;return t.style.background="#d7ffc0",new Promise((i,s)=>{function a(){if(e<=0)return t.style.background="#b4e995",i(t.innerText);t.innerText=o[Math.floor(Math.random()*o.length)],setTimeout(a,200,--e)}a()})}}},M={ref:"slotValue",id:"slotValue"};function T(e,t,o,i,s,a){return l(),u("div",M,"$",512)}const C=_(R,[["render",T],["__scopeId","data-v-5be4f6ff"]]);const F={data(){return{buttonSound:new Audio("spin.mp3")}},methods:{playButtonSound(){this.buttonSound.play()}}},N={class:"spinButtonInside"};function j(e,t,o,i,s,a){return l(),u("button",{class:"spinButton",onClick:t[0]||(t[0]=(...r)=>a.playButtonSound&&a.playButtonSound(...r))},[n("span",N,[m(e.$slots,"default",{},void 0,!0)])])}const L=_(F,[["render",j],["__scopeId","data-v-b46a553d"]]);const z=["value"],E={data(){return{value:this.$props.bets[0]}},methods:{changeValue(){this.value=this.$refs.betValue.value}}},W=Object.assign(E,{__name:"BetSelectButton",props:{bets:{type:Array,required:!0}},setup(e){return(t,o)=>(l(),u("select",{onChange:o[0]||(o[0]=(...i)=>t.changeValue&&t.changeValue(...i)),ref:"betValue"},[(l(!0),u(v,null,S(e.bets,i=>(l(),u("option",{value:i},p(i),9,z))),256))],544))}}),q=_(W,[["__scopeId","data-v-e06e1962"]]);const D={data(){return{visible:!1}}},O={key:0,id:"infoContent"};function G(e,t,o,i,s,a){return l(),u("main",null,[n("button",{id:"infoButton",onClick:t[0]||(t[0]=r=>s.visible=!s.visible)},"Info"),s.visible?(l(),u("div",O,[m(e.$slots,"default",{},void 0,!0)])):w("",!0)])}const H=_(D,[["render",G],["__scopeId","data-v-74a13410"]]);const J={props:["autospinning"]};function K(e,t,o,i,s,a){return l(),u("button",{class:x(["autospinButton",o.autospinning?"enabledAutospin":""])},[m(e.$slots,"default",{},void 0,!0)],2)}const Q=_(J,[["render",K],["__scopeId","data-v-874cfaa9"]]);const U={props:["points"],data(){return{slotSpinTimes:10,slotAmount:3,spinning:!1,slotBets:[5e3,1e4,2e4],slotValues:["$","0","7","-","="],lastPlacedBet:0,lastReward:0,autospinning:!1}},components:{Slot:C,PlayButton:L,BetSelectButton:q,InfoSection:H,AutospinButton:Q},methods:{spinSlots(e,t=[]){if(e==1){if(this.spinning)return;if(this.lastPlacedBet=Number(this.$refs.betSelect.$data.value),this.$props.points-this.lastPlacedBet<0){this.autospinning=!1;return}this.$emit("changePoints",-this.lastPlacedBet)}else if(e>this.slotAmount){this.spinning=!1,this.calculateReward(t);return}this.spinning=!0,this.$refs["slot"+e][0].spin(this.slotSpinTimes).then(o=>{t.push(o),this.spinSlots(e+1,t)})},calculateReward(e){const t=e.reduce((i,s)=>i.set(s,(i.get(s)||0)+1),new Map);let o=0;t.get("$")===this.slotAmount?o=this.lastPlacedBet*5:t.get("7")===this.slotAmount?o=this.lastPlacedBet*7:t.get("=")>=2&&(o=this.lastPlacedBet*2),this.lastReward=o,this.$emit("changePoints",o)}},watch:{autospinning:function(){!this.spinning&&this.autospinning&&this.spinSlots(1)},spinning:function(){!this.spinning&&this.autospinning&&setTimeout(this.spinSlots,500,1)}}},c=e=>(P("data-v-aa92edcd"),e=e(),k(),e),X={id:"lastReward"},Y={id:"slotSpace"},Z={id:"options"},tt=c(()=>n("h2",null,"Loot table",-1)),et=c(()=>n("tr",null,[n("th",null,"Result"),n("th",null,"Theoretical Chance"),n("th",null,"Reward")],-1)),nt=c(()=>n("td",null,"$$$",-1)),st=c(()=>n("td",null,"original bet x 5",-1)),ot=c(()=>n("td",null,"777",-1)),it=c(()=>n("td",null,"original bet x 7",-1)),lt=c(()=>n("td",null,"at least two =",-1)),at=c(()=>n("td",null,"original bet x 2",-1));function ut(e,t,o,i,s,a){const r=d("Slot"),$=d("BetSelectButton"),b=d("PlayButton"),y=d("AutospinButton"),V=d("InfoSection");return l(),u("main",null,[n("p",X,"Last reward: "+p(s.lastReward),1),n("div",Y,[(l(!0),u(v,null,S(s.slotAmount,f=>(l(),I(r,{slotValues:s.slotValues,ref_for:!0,ref:String("slot"+f),class:"slot"},null,8,["slotValues"]))),256))]),n("div",Z,[h($,{bets:s.slotBets,id:"betSelect",ref:"betSelect"},null,8,["bets"]),h(b,{style:A(s.spinning||s.autospinning?"pointer-events: none; opacity: 0.2":"pointer-events: auto"),onClick:t[0]||(t[0]=f=>a.spinSlots(1)),ref:"spinButton"},{default:g(()=>[B("Spin")]),_:1},8,["style"]),h(y,{onClick:t[1]||(t[1]=f=>s.autospinning=!s.autospinning),autospinning:s.autospinning,id:"autospinButton"},{default:g(()=>[B(" Autospin")]),_:1},8,["autospinning"])]),h(V,null,{default:g(()=>[tt,n("table",null,[et,n("tr",null,[nt,n("td",null,p((1/Math.pow(this.slotValues.length,this.slotAmount)*100).toFixed(2))+"%",1),st]),n("tr",null,[ot,n("td",null,p((1/Math.pow(this.slotValues.length,this.slotAmount)*100).toFixed(2))+"%",1),it]),n("tr",null,[lt,n("td",null,p(((1-(Math.pow(this.slotValues.length-1,this.slotAmount)+Math.pow(this.slotValues.length-1,this.slotAmount-1)*this.slotAmount)/Math.pow(this.slotValues.length,this.slotAmount))*100).toFixed(2))+"%",1),at])])]),_:1})])}const _t=_(U,[["render",ut],["__scopeId","data-v-aa92edcd"]]);export{_t as default};
