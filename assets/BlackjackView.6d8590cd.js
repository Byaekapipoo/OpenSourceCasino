import{P as m,B as V}from"./BetSelectButton.b49362bd.js";import{_ as B,o as l,c as r,F as b,d as v,b as d,t as h,i,p as g,a as S,r as f,e as _,w as C,f as k,g as p}from"./index.da08a62d.js";const D={props:["cards","dealerHide"]},H=e=>(g("data-v-f1901145"),e=e(),S(),e),w={class:"cardTable"},P={class:"cardContainer"},N={class:"upValue"},x={class:"img"},I=["src"],j={class:"downValue"},A={key:0,class:"cardContainer"},R=H(()=>d("div",{class:"upValue"},"?",-1)),T=H(()=>d("div",{class:"imgUnknown"},"?",-1)),E=H(()=>d("div",{class:"downValue"},"?",-1)),J=[R,T,E];function K(e,t,s,c,a,n){return l(),r("div",w,[(l(!0),r(b,null,v(s.dealerHide?s.cards.slice(0,1):s.cards,o=>(l(),r("div",P,[d("div",N,h(o.slice(2,4)),1),d("div",x,[d("img",{src:"/symbols/"+o[0]+".png"},null,8,I)]),d("div",j,h(o.slice(2,4)),1)]))),256)),s.dealerHide?(l(),r("div",A,J)):i("",!0)])}const M=B(D,[["render",K],["__scopeId","data-v-f1901145"]]);const Q={props:["points"],data(){return{playing:!1,selectedBet:0,lastReward:0,blackjackBets:[25e3,5e4],deckCards:["S 10","H 10","D 10","C 10","S 2","H 2","D 2","C 2","S 3","H 3","D 3","C 3","S 4","H 4","D 4","C 4","S 5","H 5","D 5","C 5","S 6","H 6","D 6","C 6","S 7","H 7","D 7","C 7","S 8","H 8","D 8","C 8","S 9","H 9","D 9","C 9","S A","H A","D A","C A","S J","H J","D J","C J","S Q","H Q","D Q","C Q","S K","H K","D K","C K"],dealerCards:[],playerCards:[],discardedCards:[],dealerHide:!0,playerHandValue:0,cardsInPlay:[],enableButtons:!0,dealerHandValue:-1,continueButtonEnabled:!1}},components:{PlayButton:m,BetSelectButton:V,BlackjackCardTable:M},methods:{startGame(){this.selectedBet=Number(this.$refs.betSelect.$data.value),this.playing=!0,this.giveDealerCards(),this.givePlayerCards()},hit(){!this.canPerformAction()||this.playerHandValue>20||(this.playerCards.push(this.fetchCard()),this.playerHandValue=this.calculateHandValue(this.playerCards))},stand(){if(!this.canPerformAction())return;for(this.dealerHide=!1;this.calculateHandValue(this.dealerCards)<17;)this.dealerCards.push(this.fetchCard());const e=this.calculateHandValue(this.dealerCards);this.dealerHandValue=e;let t=0;this.playerHandValue>21&&e>21||(this.playerHandValue>21?t=-this.selectedBet:e>21?t=this.selectedBet:this.playerHandValue>e?t=this.selectedBet:e>this.playerHandValue&&(t=-this.selectedBet)),this.$emit("changePoints",t),this.lastReward=t,this.enableButtons=!1,this.continueButtonEnabled=!0},startNewRound(){this.continueButtonEnabled=!1,this.dealerHandValue=-1,this.clearBothHands(),this.discardedCards=this.discardedCards.concat(this.cardsInPlay),this.cardsInPlay=[],this.giveDealerCards(),this.givePlayerCards(),this.enableButtons=!0},canPerformAction(){return this.points-this.selectedBet>=0},calculateHandValue(e){let t=0,s=0;for(let c=0;c<e.length;c++){const a=e[c].slice(2,4);a=="A"?t++:isNaN(a)?s+=10:s+=Number(a)}return s+=t,s<=11&&t>0&&(s+=10),s},givePlayerCards(){this.playerCards.push(this.fetchCard()),this.playerCards.push(this.fetchCard()),this.playerHandValue=this.calculateHandValue(this.playerCards)},giveDealerCards(){this.dealerHide=!0,this.dealerCards.push(this.fetchCard()),this.dealerCards.push(this.fetchCard())},clearBothHands(){this.playerCards=[],this.dealerCards=[],this.playerHandValue=0},fetchCard(){this.deckCards.length==0&&(alert("Shuffling discarded cards back to the deck."),this.shuffleDiscardToDeck());let e=this.deckCards.splice(Math.floor(Math.random()*this.deckCards.length),1)[0];return this.cardsInPlay.push(e),e},shuffleDiscardToDeck(){this.deckCards=this.discardedCards,this.discardedCards=[];for(let e=this.deckCards.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),s=this.deckCards[e];this.deckCards[e]=this.deckCards[t],this.deckCards[t]=s}}}},F={id:"lastReward"},G={key:0,id:"options"},L={key:1,id:"game"},U={id:"options"};function q(e,t,s,c,a,n){const o=f("BetSelectButton"),u=f("PlayButton"),y=f("BlackjackCardTable");return l(),r("main",null,[d("p",F,"Last reward: "+h(a.lastReward),1),a.playing?i("",!0):(l(),r("div",G,[_(o,{bets:a.blackjackBets,id:"betSelect",ref:"betSelect"},null,8,["bets"]),_(u,{onClick:n.startGame},{default:C(()=>[p("Play")]),_:1},8,["onClick"])])),a.playing?(l(),r("div",L,[d("h1",null,h(a.dealerHandValue<0?"?":a.dealerHandValue),1),_(y,{dealerHide:a.dealerHide,cards:a.dealerCards},null,8,["dealerHide","cards"]),_(y,{dealerHide:!1,cards:a.playerCards},null,8,["cards"]),d("h1",null,h(a.playerHandValue),1),d("div",U,[a.enableButtons?(l(),k(u,{key:0,onClick:n.hit},{default:C(()=>[p("Hit")]),_:1},8,["onClick"])):i("",!0),a.enableButtons?(l(),k(u,{key:1,onClick:n.stand},{default:C(()=>[p("Stand")]),_:1},8,["onClick"])):i("",!0),a.continueButtonEnabled?(l(),k(u,{key:2,onClick:n.startNewRound},{default:C(()=>[p("Next Round")]),_:1},8,["onClick"])):i("",!0)])])):i("",!0)])}const W=B(Q,[["render",q],["__scopeId","data-v-9b7284d1"]]);export{W as default};
