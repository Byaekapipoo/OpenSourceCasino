import{_,o as d,c as p,r as h,a as u,n as g,b as t,t as a,F as v,d as w,e as x}from"./index.32b7ced5.js";import{T as b,B as S}from"./ToastNotification.9a003e6c.js";const B={props:["slotValues"],methods:{spin(o){const e=this.$refs.slotValue,n=[...this.$props.slotValues];let i=null;return e.classList.add("spinning"),e.classList.remove("spun"),new Promise(s=>{function l(){if(o<=0)return e.classList.add("spun"),e.classList.remove("spinning"),s(e.innerText);const c=Math.floor(Math.random()*n.length);i!==null&&n.push(i),e.innerText=n[c],i=n[c],n.splice(c,1),setTimeout(l,100,--o)}l()})}}},k={ref:"slotValue",id:"slotValue",class:"text-center w-14 bg-neutral text-primary p-5 rounded-xl font-black text-xl"};function y(o,e,n,i,s,l){return d(),p("div",k," $ ",512)}const V=_(B,[["render",y],["__scopeId","data-v-92a6429d"]]),M={props:["points"],data(){return{slotSpinTimes:10,slotAmount:3,spinning:!1,slotBets:[5e3,1e4,2e4],slotValues:["$","0","7","-","="],lastPlacedBet:0,lastReward:0,autospinning:!1,buttonSound:new Audio("spin.mp3"),end:!1}},components:{ToastNotification:b,SlotComponent:V,BetSelectButton:S},methods:{playButtonSound(){this.buttonSound.play()},spinSlots(o,e=[]){if(o===1){if(this.spinning)return;if(this.lastPlacedBet=Number(this.$refs.betSelect.$data.value),this.$props.points-this.lastPlacedBet<0){this.autospinning=!1;return}this.$emit("changePoints",-this.lastPlacedBet)}else if(o>this.slotAmount){this.spinning=!1,this.calculateReward(e);return}this.spinning=!0,this.$refs["slot"+o][0].spin(this.slotSpinTimes).then(n=>{e.push(n),this.spinSlots(o+1,e)})},calculateReward(o){const e=o.reduce((i,s)=>i.set(s,(i.get(s)||0)+1),new Map);let n=0;e.get("$")===this.slotAmount?n=this.lastPlacedBet*5:e.get("7")===this.slotAmount?n=this.lastPlacedBet*7:e.get("=")>=2&&(n=this.lastPlacedBet*2),this.end=!0,this.lastReward=n,this.$emit("changePoints",n),setTimeout(()=>{this.end=!1},3e3)}},watch:{autospinning:function(){!this.spinning&&this.autospinning&&this.spinSlots(1)},spinning:function(){!this.spinning&&this.autospinning&&setTimeout(this.spinSlots,500,1)}}},A={class:"flex min-h-screen w-screen justify-center items-center transition-all"},R={class:"flex flex-col w-5/6 sm:w-2/3 items-center gap-5"},T={class:"flex flex-col items-center"},P=t("h2",{class:"text-[2em]"},"Slots",-1),$={id:"lastReward",class:"font-mono"},L={id:"slotSpace",class:"pt-3 flex justify-center gap-5 w-full"},j={id:"options",class:"flex flex-col sm:flex-row flex-wrap justify-center gap-3 trans"},z={class:"btn-group btn-group-horizontal"},N=["disabled"],F={tabindex:"0",class:"collapse rounded-box"},C=t("div",{class:"collapse-title text-2xl font-medium text-center p-5"}," Loot chances ",-1),O={class:"collapse-content"},E={class:"stats stats-vertical lg:stats-horizontal shadow"},I={class:"stat"},W=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-8 h-8 stroke-current stroke-primary"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),D=t("div",{class:"stat-title"},"$$$",-1),Y={class:"stat-value"},q=t("div",{class:"stat-desc"},"Reward: Original bet x 5",-1),G={class:"stat"},H=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-8 h-8 stroke-current stroke-primary"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),J=t("div",{class:"stat-title"},"777",-1),K={class:"stat-value"},Q=t("div",{class:"stat-desc"},"Reward: Original bet x 7",-1),U={class:"stat"},X=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-8 h-8 stroke-current stroke-primary"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),Z=t("div",{class:"stat-title"},"==",-1),tt={class:"stat-value"},st=t("div",{class:"stat-desc"},"Reward: Original bet x 2",-1);function et(o,e,n,i,s,l){const c=h("ToastNotification"),m=h("SlotComponent"),f=h("BetSelectButton");return d(),p("main",A,[u(c,{message:"You earned "+s.lastReward+" points!",class:g(["transition-all",s.end?"translate-x-0":"translate-x-96"])},null,8,["message","class"]),t("div",R,[t("div",T,[P,t("p",$,"Last reward: "+a(s.lastReward),1)]),t("div",L,[(d(!0),p(v,null,w(s.slotAmount,r=>(d(),x(m,{key:r,slotValues:s.slotValues,ref_for:!0,ref:String("slot"+r),class:"slot"},null,8,["slotValues"]))),128))]),t("div",j,[u(f,{bets:s.slotBets,disabled:s.spinning||s.autospinning,id:"betSelect",ref:"betSelect"},null,8,["bets","disabled"]),t("div",z,[t("button",{class:"btn btn-primary transition-all w-1/2",onClick:e[0]||(e[0]=r=>{l.spinSlots(1),l.playButtonSound()}),ref:"spinButton",disabled:s.spinning||s.autospinning},a(s.spinning||s.autospinning?"Spinning...":"Spin"),9,N),t("button",{class:"btn",onClick:e[1]||(e[1]=r=>s.autospinning=!s.autospinning),id:"autospinButton"},a(s.autospinning?"Stop":"Autospin"),1)])]),t("div",F,[C,t("div",O,[t("div",E,[t("div",I,[W,D,t("div",Y,a((1/Math.pow(this.slotValues.length,this.slotAmount)*100).toFixed(2))+"% ",1),q]),t("div",G,[H,J,t("div",K,a((1/Math.pow(this.slotValues.length,this.slotAmount)*100).toFixed(2))+"% ",1),Q]),t("div",U,[X,Z,t("div",tt,a(((1-(Math.pow(this.slotValues.length-1,this.slotAmount)+Math.pow(this.slotValues.length-1,this.slotAmount-1)*this.slotAmount)/Math.pow(this.slotValues.length,this.slotAmount))*100).toFixed(2))+"% ",1),st])])])])])])}const it=_(M,[["render",et]]);export{it as default};
