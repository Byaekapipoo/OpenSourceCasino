import{P as g,B as v,I as D}from"./InfoSection.59044750.js";import{_ as m,o as d,c as i,F as w,d as P,b as a,t as C,i as n,p as b,a as V,r as p,e as u,w as _,f as y,g as r}from"./index.8cf7fe92.js";const I={props:["cards","dealerHide"]},H=e=>(b("data-v-196f0f9f"),e=e(),V(),e),N={class:"cardTable"},x={class:"cardContainer"},T={class:"upValue"},j={class:"img"},A=["src"],R={class:"downValue"},E={key:0,class:"cardContainer"},J=H(()=>a("div",{class:"upValue"},"?",-1)),K=H(()=>a("div",{class:"imgUnknown"},"?",-1)),M=H(()=>a("div",{class:"downValue"},"?",-1)),Q=[J,K,M];function $(e,s,l,c,t,o){return d(),i("div",N,[(d(!0),i(w,null,P(l.dealerHide?l.cards.slice(0,1):l.cards,h=>(d(),i("div",x,[a("div",T,C(h.slice(2,4)),1),a("div",j,[a("img",{src:"/OpenSourceCasino/symbols/"+h[0]+".png"},null,8,A)]),a("div",R,C(h.slice(2,4)),1)]))),256)),l.dealerHide?(d(),i("div",E,Q)):n("",!0)])}const F=m(I,[["render",$],["__scopeId","data-v-196f0f9f"]]);const G={props:["points"],data(){return{playing:!1,selectedBet:0,lastReward:0,blackjackBets:[25e3,5e4],deckCards:["S 10","H 10","D 10","C 10","S 2","H 2","D 2","C 2","S 3","H 3","D 3","C 3","S 4","H 4","D 4","C 4","S 5","H 5","D 5","C 5","S 6","H 6","D 6","C 6","S 7","H 7","D 7","C 7","S 8","H 8","D 8","C 8","S 9","H 9","D 9","C 9","S A","H A","D A","C A","S J","H J","D J","C J","S Q","H Q","D Q","C Q","S K","H K","D K","C K"],dealerCards:[],playerCards:[],discardedCards:[],dealerHide:!0,playerHandValue:0,cardsInPlay:[],enableButtons:!0,dealerHandValue:-1,continueButtonEnabled:!1}},components:{PlayButton:g,BetSelectButton:v,BlackjackCardTable:F,InfoSection:D},methods:{startGame(){this.selectedBet=Number(this.$refs.betSelect.$data.value),this.canPerformAction()&&(this.$emit("changePoints",-this.selectedBet),this.playing=!0,this.giveDealerCards(),this.givePlayerCards())},hit(){this.playerHandValue>20||(this.playerCards.push(this.fetchCard()),this.playerHandValue=this.calculateHandValue(this.playerCards))},stand(){for(this.dealerHide=!1;this.calculateHandValue(this.dealerCards)<17;)this.dealerCards.push(this.fetchCard());const e=this.calculateHandValue(this.dealerCards);this.dealerHandValue=e;let s=this.selectedBet;this.playerHandValue>21&&e>21||(this.playerHandValue>21?s-=this.selectedBet:e>21?s+=this.selectedBet:this.playerHandValue>e?s+=this.selectedBet:e>this.playerHandValue&&(s-=this.selectedBet)),this.$emit("changePoints",s),this.lastReward=s,this.enableButtons=!1,this.continueButtonEnabled=!0},startNewRound(){!this.canPerformAction()||(this.$emit("changePoints",-this.selectedBet),this.continueButtonEnabled=!1,this.dealerHandValue=-1,this.clearBothHands(),this.discardedCards=this.discardedCards.concat(this.cardsInPlay),this.cardsInPlay=[],this.giveDealerCards(),this.givePlayerCards(),this.enableButtons=!0)},canPerformAction(){return this.points-this.selectedBet>=0},calculateHandValue(e){let s=0,l=0;for(let c=0;c<e.length;c++){const t=e[c].slice(2,4);t=="A"?s++:isNaN(t)?l+=10:l+=Number(t)}return l+=s,l<=11&&s>0&&(l+=10),l},givePlayerCards(){this.playerCards.push(this.fetchCard()),this.playerCards.push(this.fetchCard()),this.playerHandValue=this.calculateHandValue(this.playerCards)},giveDealerCards(){this.dealerHide=!0,this.dealerCards.push(this.fetchCard()),this.dealerCards.push(this.fetchCard())},clearBothHands(){this.playerCards=[],this.dealerCards=[],this.playerHandValue=0},fetchCard(){this.deckCards.length==0&&(alert("Shuffling discarded cards back to the deck."),this.shuffleDiscardToDeck());let e=this.deckCards.splice(Math.floor(Math.random()*this.deckCards.length),1)[0];return this.cardsInPlay.push(e),e},shuffleDiscardToDeck(){this.deckCards=this.discardedCards,this.discardedCards=[];for(let e=this.deckCards.length-1;e>0;e--){const s=Math.floor(Math.random()*(e+1)),l=this.deckCards[e];this.deckCards[e]=this.deckCards[s],this.deckCards[s]=l}}}},k=e=>(b("data-v-d4fc6769"),e=e(),V(),e),L={id:"lastReward"},Y={key:0,id:"options"},O={key:1,id:"game"},U={id:"options"},q=k(()=>a("br",null,null,-1)),z=k(()=>a("br",null,null,-1)),W=k(()=>a("br",null,null,-1)),X=k(()=>a("br",null,null,-1));function Z(e,s,l,c,t,o){const h=p("BetSelectButton"),f=p("PlayButton"),B=p("BlackjackCardTable"),S=p("InfoSection");return d(),i("main",null,[a("p",L,"Last reward: "+C(t.lastReward),1),t.playing?n("",!0):(d(),i("div",Y,[u(h,{bets:t.blackjackBets,id:"betSelect",ref:"betSelect"},null,8,["bets"]),u(f,{onClick:o.startGame},{default:_(()=>[r("Play")]),_:1},8,["onClick"])])),t.playing?(d(),i("div",O,[a("h1",null,C(t.dealerHandValue<0?"?":t.dealerHandValue),1),u(B,{dealerHide:t.dealerHide,cards:t.dealerCards},null,8,["dealerHide","cards"]),u(B,{dealerHide:!1,cards:t.playerCards},null,8,["cards"]),a("h1",null,C(t.playerHandValue),1),a("div",U,[t.enableButtons?(d(),y(f,{key:0,onClick:o.hit},{default:_(()=>[r("Hit")]),_:1},8,["onClick"])):n("",!0),t.enableButtons?(d(),y(f,{key:1,onClick:o.stand},{default:_(()=>[r("Stand")]),_:1},8,["onClick"])):n("",!0),t.continueButtonEnabled?(d(),y(f,{key:2,onClick:o.startNewRound},{default:_(()=>[r("Next Round")]),_:1},8,["onClick"])):n("",!0)])])):n("",!0),u(S,null,{default:_(()=>[r(" Starting a new game or a new round = Dealer takes your bet "),q,r(),z,r(" Tie = Dealer returns your bet "),W,r(" You lose = Dealer doesn't return your bet "),X,r(" You win = Dealer returns your bet x2 ")]),_:1})])}const se=m(G,[["render",Z],["__scopeId","data-v-d4fc6769"]]);export{se as default};
