import{_ as w,T as _}from"./ToastNotification.d061647a.js";import{_ as f,o as g,c as m,r as p,a as h,n as x,b as l,t as v,h as b}from"./index.d639147e.js";const C={data(){return{canvasCtx:void 0,canvas:void 0,spinning:!1,canvasRadius:.5,offset:.05,fieldCount:20,ballSize:.05,initialMoveDelay:10,moveDelayDelta:10}},mounted(){this.canvas=this.$refs.roulette,this.canvasCtx=this.canvas.getContext("2d"),window.addEventListener("resize",this.rescaleCanvas),this.rescaleCanvas();const t=this.canvas.width;this.drawFreshWheel(t,t*this.canvasRadius,t/2,t/2)},methods:{spin(){this.spinning=!0;const t=this.canvas.width;let e=this.canvasRadius*t;const i=t/2,a=t/2;let s=0;const n=this.drawWheelWithBall,o=this.moveDelayDelta,d=Math.floor(Math.random()*101)+200;return new Promise(c=>{function r(u){if(u>=d)return c(s%2===0?"dark-blue":"light-blue");n(t,e,i,a,s++),setTimeout(r,u,u+o*Math.floor(Math.random()*2))}r(this.initialMoveDelay)})},drawWheelWithBall(t,e,i,a,s){this.drawFreshWheel(t,e,i,a),this.canvasCtx.fillStyle="white",this.canvasCtx.beginPath();const n=(e-t*this.ballSize*2)*Math.sin(2*Math.PI*s/this.fieldCount)+i,o=(e-t*this.ballSize*2)*Math.cos(2*Math.PI*s/this.fieldCount)+a;this.canvasCtx.arc(n,o,t*this.ballSize,0,2*Math.PI),this.canvasCtx.fill()},rescaleCanvas(){if(this.spinning)return;this.canvas.width=window.innerHeight/3.5,this.canvas.height=window.innerHeight/3.5;const t=this.canvas.height;this.drawFreshWheel(t,t*this.canvasRadius,t/2,t/2)},drawFreshWheel(t,e,i,a){this.canvasCtx.fillStyle="#191D24",this.canvasCtx.beginPath(),this.canvasCtx.arc(i,a,e,0,2*Math.PI,!1),this.canvasCtx.fill(),e-=t*this.offset;let s=1/this.fieldCount*Math.PI;for(let n=0;n<this.fieldCount;n++){const o=1/this.fieldCount*2*Math.PI;this.canvasCtx.beginPath(),this.canvasCtx.arc(i,a,e,s,s+o),s+=o,this.canvasCtx.lineTo(i,a),n%2===0?this.canvasCtx.fillStyle="#6184D8":this.canvasCtx.fillStyle="#19297C",this.canvasCtx.fill()}}}},S={ref:"roulette"};function R(t,e,i,a,s,n){return g(),m("canvas",S,null,512)}const y=f(C,[["render",R],["__scopeId","data-v-ce118739"]]),B={props:["points"],data(){return{rouletteBets:[1e5,2e5],autospinning:!1,lastReward:0,spinning:!1,colors:["dark-blue","light-blue"],buttonSound:new Audio("spin.mp3"),end:!1}},components:{BetSelectButton:w,Roulette:y,ToastNotification:_},methods:{playButtonSound(){this.buttonSound.play()},spinRoulette(){if(this.spinning)return;const t=this.$refs.betSelect.$data.value;if(this.$props.points-t<0){this.autospinning=!1;return}this.spinning=!0,this.$emit("changePoints",-t);const e=this.$refs.colorSelect.$data.value;this.$refs.roulette.spin().then(i=>{this.end=!0,i===e?(this.$emit("changePoints",t*1.5),this.lastReward=t*1.5):this.lastReward=0,this.spinning=!1,setTimeout(()=>{this.end=!1},3e3)})}},watch:{autospinning:function(){!this.spinning&&this.autospinning&&this.spinRoulette()},spinning:function(){!this.spinning&&this.autospinning&&setTimeout(this.spinRoulette,1e3)}}},k={class:"flex min-h-screen w-screen justify-center items-center transition-all"},M={class:"flex flex-col w-5/6 sm:w-2/3 items-center gap-5"},P={class:"flex flex-col items-center"},W=l("h2",{class:"text-[2em]"},"Roulette",-1),$={id:"lastReward",class:"font-mono"},D={id:"options",class:"flex flex-col items-center justify-center sm:flex-row gap-5 transition-all"},z={class:"btn-group btn-group-horizontal"},T=b('<div tabindex="0" class="collapse rounded-box"><div class="collapse-title text-2xl font-medium text-center p-5"> Loot chances </div><div class="collapse-content"><div class="stats stats-vertical lg:stats-horizontal shadow"><div class="stat"><div class="stat-figure text-secondary"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current stroke-primary"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="stat-title">Light-blue</div><div class="stat-value">50%</div><div class="stat-desc">Reward: Original bet x 1.5</div></div><div class="stat"><div class="stat-figure text-secondary"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="inline-block w-8 h-8 stroke-current stroke-primary"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg></div><div class="stat-title">Dark-blue</div><div class="stat-value">50%</div><div class="stat-desc">Reward: Original bet x 1.5</div></div></div></div></div>',1);function I(t,e,i,a,s,n){const o=p("ToastNotification"),d=p("Roulette"),c=p("BetSelectButton");return g(),m("main",k,[h(o,{message:"You earned "+s.lastReward+" points!",class:x(["transition-all",s.end?"translate-x-0":"translate-x-96"])},null,8,["message","class"]),l("div",M,[l("div",P,[W,l("p",$,"Last reward: "+v(s.lastReward),1)]),h(d,{class:"!m-0 p-5",ref:"roulette"},null,512),l("div",D,[h(c,{bets:s.rouletteBets,id:"betSelect",ref:"betSelect"},null,8,["bets"]),l("div",z,[l("button",{class:"btn btn-primary transition-all",onClick:e[0]||(e[0]=r=>{n.spinRoulette(),n.playButtonSound()}),ref:"spinButton"},v(s.spinning?"Spinning...":"Spin"),513),l("button",{class:"btn",onClick:e[1]||(e[1]=r=>s.autospinning=!s.autospinning),id:"autospinButton"},v(s.autospinning?"Stop":"Autospin"),1)]),h(c,{title:"Choose color",bets:s.colors,id:"colorSelect",ref:"colorSelect"},null,8,["bets"])]),T])])}const F=f(B,[["render",I]]);export{F as default};
