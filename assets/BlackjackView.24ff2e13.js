import{P as B,B as m}from"./BetSelectButton.8b6e78c9.js";import{_ as y,o as d,c as n,t as _,r as f,i as r,b as o,e as h,w as u,f as p,g as C}from"./index.f410e3bc.js";const b={props:["cards","dealerHide"]},V={id:"cardContainer"};function g(e,t,s,l,a,i){return d(),n("div",V,_(s.dealerHide?s.cards[0]+" | ?":s.cards.join(" | ")),1)}const S=y(b,[["render",g],["__scopeId","data-v-0f5b1020"]]);const v={props:["points"],data(){return{playing:!1,selectedBet:0,lastReward:0,blackjackBets:[25e3,5e4],deckCards:["S 1","H 1","D 1","C 1","S 2","H 2","D 2","C 2","S 3","H 3","D 3","C 3","S 4","H 4","D 4","C 4","S 5","H 5","D 5","C 5","S 6","H 6","D 6","C 6","S 7","H 7","D 7","C 7","S 8","H 8","D 8","C 8","S 9","H 9","D 9","C 9","S A","H A","D A","C A","S J","H J","D J","C J","S Q","H Q","D Q","C Q","S K","H K","D K","C K"],dealerCards:[],playerCards:[],discardedCards:[],dealerHide:!0,playerHandValue:0,cardsInPlay:[],enableButtons:!0,dealerHandValue:-1,continueButtonEnabled:!1}},components:{PlayButton:B,BetSelectButton:m,BlackjackCardTable:S},methods:{startGame(){this.selectedBet=Number(this.$refs.betSelect.$data.value),this.playing=!0,this.giveDealerCards(),this.givePlayerCards()},hit(){!this.canPerformAction()||this.playerHandValue>20||(this.playerCards.push(this.fetchCard()),this.playerHandValue=this.calculateHandValue(this.playerCards))},stand(){if(!this.canPerformAction())return;for(this.dealerHide=!1;this.calculateHandValue(this.dealerCards)<17;)this.dealerCards.push(this.fetchCard());const e=this.calculateHandValue(this.dealerCards);this.dealerHandValue=e;let t=0;this.playerHandValue>21&&e>21||(this.playerHandValue>21?t=-this.selectedBet:e>21?t=this.selectedBet:this.playerHandValue>e?t=this.selectedBet:e>this.playerHandValue&&(t=-this.selectedBet)),this.$emit("changePoints",t),this.lastReward=t,this.enableButtons=!1,this.continueButtonEnabled=!0},startNewRound(){this.continueButtonEnabled=!1,this.dealerHandValue=-1,this.clearBothHands(),this.discardedCards=this.discardedCards.concat(this.cardsInPlay),this.cardsInPlay=[],this.giveDealerCards(),this.givePlayerCards(),this.enableButtons=!0},canPerformAction(){return this.points-this.selectedBet>=0},calculateHandValue(e){let t=0,s=0;for(let l=0;l<e.length;l++){const a=e[l][2];a=="A"?t++:isNaN(a)?s+=10:s+=Number(a)}return s+=t,s<=11&&t>0&&(s+=10),s},givePlayerCards(){this.playerCards.push(this.fetchCard()),this.playerCards.push(this.fetchCard()),this.playerHandValue=this.calculateHandValue(this.playerCards)},giveDealerCards(){this.dealerHide=!0,this.dealerCards.push(this.fetchCard()),this.dealerCards.push(this.fetchCard())},clearBothHands(){this.playerCards=[],this.dealerCards=[],this.playerHandValue=0},fetchCard(){this.deckCards.length==0&&(alert("Shuffling discarded cards back to the deck."),this.shuffleDiscardToDeck());let e=this.deckCards.splice(Math.floor(Math.random()*this.deckCards.length),1)[0];return this.cardsInPlay.push(e),e},shuffleDiscardToDeck(){this.deckCards=this.discardedCards,this.discardedCards=[];for(let e=this.deckCards.length-1;e>0;e--){const t=Math.floor(Math.random()*(e+1)),s=this.deckCards[e];this.deckCards[e]=this.deckCards[t],this.deckCards[t]=s}}}},D={key:0,id:"warningLabel"},P={id:"lastReward"},w={key:1,id:"options"},N={key:2,id:"game"},j={id:"options"};function x(e,t,s,l,a,i){const H=f("BetSelectButton"),c=f("PlayButton"),k=f("BlackjackCardTable");return d(),n("main",null,[a.playing?r("",!0):(d(),n("div",D,"Warning - this gamemode is currently at beta version!")),o("p",P,"Last reward: "+_(a.lastReward),1),a.playing?r("",!0):(d(),n("div",w,[h(H,{bets:a.blackjackBets,id:"betSelect",ref:"betSelect"},null,8,["bets"]),h(c,{onClick:i.startGame},{default:u(()=>[C("Play")]),_:1},8,["onClick"])])),a.playing?(d(),n("div",N,[o("h1",null,_(a.dealerHandValue<0?"?":a.dealerHandValue),1),h(k,{dealerHide:a.dealerHide,cards:a.dealerCards},null,8,["dealerHide","cards"]),h(k,{dealerHide:!1,cards:a.playerCards},null,8,["cards"]),o("h1",null,_(a.playerHandValue),1),o("div",j,[a.enableButtons?(d(),p(c,{key:0,onClick:i.hit},{default:u(()=>[C("Hit")]),_:1},8,["onClick"])):r("",!0),a.enableButtons?(d(),p(c,{key:1,onClick:i.stand},{default:u(()=>[C("Stand")]),_:1},8,["onClick"])):r("",!0),a.continueButtonEnabled?(d(),p(c,{key:2,onClick:i.startNewRound},{default:u(()=>[C("Next Round")]),_:1},8,["onClick"])):r("",!0)])])):r("",!0)])}const T=y(v,[["render",x],["__scopeId","data-v-96a029c1"]]);export{T as default};
