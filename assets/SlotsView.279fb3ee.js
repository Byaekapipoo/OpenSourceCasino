import{_ as g,o as r,c as _,r as u,b as t,t as c,F as b,d as $,e as p,w as d,n as v,f as x,g as f,p as A,a as y}from"./index.a61eeda9.js";import{P,B as R}from"./BetSelectButton.d3f4c30d.js";import{I,A as M}from"./AutospinButton.8452d2fb.js";const T={props:["slotValues"],methods:{spin(e){const s=this.$refs.slotValue,o=this.$props.slotValues;return s.style.background="#d7ffc0",new Promise((i,n)=>{function a(){if(e<=0)return s.style.background="#b4e995",i(s.innerText);s.innerText=o[Math.floor(Math.random()*o.length)],setTimeout(a,200,--e)}a()})}}},k={ref:"slotValue",id:"slotValue"};function F(e,s,o,i,n,a){return r(),_("div",k,"$",512)}const N=g(T,[["render",F],["__scopeId","data-v-5be4f6ff"]]);const L={props:["points"],data(){return{slotSpinTimes:10,slotAmount:3,spinning:!1,slotBets:[5e3,1e4,2e4],slotValues:["$","0","7","-","="],lastPlacedBet:0,lastReward:0,autospinning:!1}},components:{Slot:N,PlayButton:P,BetSelectButton:R,InfoSection:I,AutospinButton:M},methods:{spinSlots(e,s=[]){if(e==1){if(this.spinning)return;if(this.lastPlacedBet=Number(this.$refs.betSelect.$data.value),this.$props.points-this.lastPlacedBet<0){this.autospinning=!1;return}this.$emit("changePoints",-this.lastPlacedBet)}else if(e>this.slotAmount){this.spinning=!1,this.calculateReward(s);return}this.spinning=!0,this.$refs["slot"+e][0].spin(this.slotSpinTimes).then(o=>{s.push(o),this.spinSlots(e+1,s)})},calculateReward(e){const s=e.reduce((i,n)=>i.set(n,(i.get(n)||0)+1),new Map);let o=0;s.get("$")===this.slotAmount?o=this.lastPlacedBet*5:s.get("7")===this.slotAmount?o=this.lastPlacedBet*7:s.get("=")>=2&&(o=this.lastPlacedBet*2),this.lastReward=o,this.$emit("changePoints",o)}},watch:{autospinning:function(){!this.spinning&&this.autospinning&&this.spinSlots(1)},spinning:function(){!this.spinning&&this.autospinning&&setTimeout(this.spinSlots,500,1)}}},l=e=>(A("data-v-aa92edcd"),e=e(),y(),e),E={id:"lastReward"},W={id:"slotSpace"},j={id:"options"},z=l(()=>t("h2",null,"Loot table",-1)),C=l(()=>t("tr",null,[t("th",null,"Result"),t("th",null,"Theoretical Chance"),t("th",null,"Reward")],-1)),D=l(()=>t("td",null,"$$$",-1)),q=l(()=>t("td",null,"original bet x 5",-1)),G=l(()=>t("td",null,"777",-1)),H=l(()=>t("td",null,"original bet x 7",-1)),J=l(()=>t("td",null,"at least two =",-1)),K=l(()=>t("td",null,"original bet x 2",-1));function O(e,s,o,i,n,a){const m=u("Slot"),S=u("BetSelectButton"),B=u("PlayButton"),w=u("AutospinButton"),V=u("InfoSection");return r(),_("main",null,[t("p",E,"Last reward: "+c(n.lastReward),1),t("div",W,[(r(!0),_(b,null,$(n.slotAmount,h=>(r(),x(m,{slotValues:n.slotValues,ref_for:!0,ref:String("slot"+h),class:"slot"},null,8,["slotValues"]))),256))]),t("div",j,[p(S,{bets:n.slotBets,id:"betSelect",ref:"betSelect"},null,8,["bets"]),p(B,{style:v(n.spinning||n.autospinning?"pointer-events: none; opacity: 0.2":"pointer-events: auto"),onClick:s[0]||(s[0]=h=>a.spinSlots(1)),ref:"spinButton"},{default:d(()=>[f("Spin")]),_:1},8,["style"]),p(w,{onClick:s[1]||(s[1]=h=>n.autospinning=!n.autospinning),autospinning:n.autospinning,id:"autospinButton"},{default:d(()=>[f(" Autospin")]),_:1},8,["autospinning"])]),p(V,null,{default:d(()=>[z,t("table",null,[C,t("tr",null,[D,t("td",null,c((1/Math.pow(this.slotValues.length,this.slotAmount)*100).toFixed(2))+"%",1),q]),t("tr",null,[G,t("td",null,c((1/Math.pow(this.slotValues.length,this.slotAmount)*100).toFixed(2))+"%",1),H]),t("tr",null,[J,t("td",null,c(((1-(Math.pow(this.slotValues.length-1,this.slotAmount)+Math.pow(this.slotValues.length-1,this.slotAmount-1)*this.slotAmount)/Math.pow(this.slotValues.length,this.slotAmount))*100).toFixed(2))+"%",1),K])])]),_:1})])}const Y=g(L,[["render",O],["__scopeId","data-v-aa92edcd"]]);export{Y as default};
