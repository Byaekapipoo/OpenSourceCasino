import{_,o as d,c as p,r as h,a as u,n as g,b as t,t as a,F as v,d as w,e as x}from"./index.7e9fdc50.js";import{T as S,B as b}from"./ToastNotification.c20a076a.js";const B={props:["slotValues"],methods:{spin(o){const s=this.$refs.slotValue,n=[...this.$props.slotValues];let i=null;return s.classList.add("spinning"),s.classList.remove("spun"),new Promise(e=>{function l(){if(o<=0)return s.classList.add("spun"),s.classList.remove("spinning"),e(s.innerText);const c=Math.floor(Math.random()*n.length);i!==null&&n.push(i),s.innerText=n[c],i=n[c],n.splice(c,1),setTimeout(l,100,--o)}l()})}}},k={ref:"slotValue",id:"slotValue",class:"text-center w-14 bg-neutral text-primary p-5 rounded-xl font-black text-xl"};function y(o,s,n,i,e,l){return d(),p("div",k," $ ",512)}const V=_(B,[["render",y],["__scopeId","data-v-92a6429d"]]),M={props:["points"],data(){return{slotSpinTimes:10,slotAmount:3,spinning:!1,slotBets:[5e3,1e4,2e4],slotValues:["$","0","7","-","="],lastPlacedBet:0,lastReward:0,autospinning:!1,buttonSound:new Audio("spin.mp3"),end:!1}},components:{ToastNotification:S,SlotComponent:V,BetSelectButton:b},methods:{playButtonSound(){this.buttonSound.play()},spinSlots(o,s=[]){if(o===1){if(this.spinning)return;if(this.lastPlacedBet=Number(this.$refs.betSelect.$data.value),this.$props.points-this.lastPlacedBet<0){this.autospinning=!1;return}this.$emit("changePoints",-this.lastPlacedBet)}else if(o>this.slotAmount){this.spinning=!1,this.calculateReward(s);return}this.spinning=!0,this.$refs["slot"+o][0].spin(this.slotSpinTimes).then(n=>{s.push(n),this.spinSlots(o+1,s)})},calculateReward(o){const s=o.reduce((i,e)=>i.set(e,(i.get(e)||0)+1),new Map);let n=0;s.get("$")===this.slotAmount?n=this.lastPlacedBet*5:s.get("7")===this.slotAmount?n=this.lastPlacedBet*7:s.get("=")>=2&&(n=this.lastPlacedBet*2),this.end=!0,this.lastReward=n,this.$emit("changePoints",n),setTimeout(()=>{this.end=!1},3e3)}},watch:{autospinning:function(){!this.spinning&&this.autospinning&&this.spinSlots(1)},spinning:function(){!this.spinning&&this.autospinning&&setTimeout(this.spinSlots,500,1)}}},A={class:"flex min-h-screen w-screen justify-center items-center transition-all"},$={class:"flex flex-col w-5/6 sm:w-2/3 items-center gap-5"},R={class:"flex flex-col items-center"},T=t("h2",{class:"text-[2em]"},"Slots",-1),P={id:"lastReward",class:"font-mono"},L={id:"slotSpace",class:"pt-3 flex justify-center gap-5 w-full"},j={id:"options",class:"flex flex-col sm:flex-row flex-wrap justify-center gap-3 trans"},z={class:"btn-group btn-group-horizontal"},N={tabindex:"0",class:"collapse rounded-box"},F=t("div",{class:"collapse-title text-2xl font-medium text-center p-5"}," Loot chances ",-1),C={class:"collapse-content"},O={class:"stats stats-vertical lg:stats-horizontal shadow"},E={class:"stat"},I=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-8 h-8 stroke-current stroke-primary"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),W=t("div",{class:"stat-title"},"$$$",-1),D={class:"stat-value"},Y=t("div",{class:"stat-desc"},"Reward: Original bet x 5",-1),q={class:"stat"},G=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-8 h-8 stroke-current stroke-primary"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),H=t("div",{class:"stat-title"},"777",-1),J={class:"stat-value"},K=t("div",{class:"stat-desc"},"Reward: Original bet x 7",-1),Q={class:"stat"},U=t("div",{class:"stat-figure text-secondary"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"inline-block w-8 h-8 stroke-current stroke-primary"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),X=t("div",{class:"stat-title"},"==",-1),Z={class:"stat-value"},tt=t("div",{class:"stat-desc"},"Reward: Original bet x 2",-1);function st(o,s,n,i,e,l){const c=h("ToastNotification"),m=h("SlotComponent"),f=h("BetSelectButton");return d(),p("main",A,[u(c,{message:"You earned "+e.lastReward+" points!",class:g(["transition-all",e.end?"translate-x-0":"translate-x-96"])},null,8,["message","class"]),t("div",$,[t("div",R,[T,t("p",P,"Last reward: "+a(e.lastReward),1)]),t("div",L,[(d(!0),p(v,null,w(e.slotAmount,r=>(d(),x(m,{key:r,slotValues:e.slotValues,ref_for:!0,ref:String("slot"+r),class:"slot"},null,8,["slotValues"]))),128))]),t("div",j,[u(f,{bets:e.slotBets,disabled:e.spinning||e.autospinning,id:"betSelect",ref:"betSelect"},null,8,["bets","disabled"]),t("div",z,[t("button",{class:"btn btn-primary transition-all w-1/2",onClick:s[0]||(s[0]=r=>{l.spinSlots(1),l.playButtonSound()}),ref:"spinButton"},a(e.spinning?"Spinning...":"Spin"),513),t("button",{class:"btn",onClick:s[1]||(s[1]=r=>e.autospinning=!e.autospinning),id:"autospinButton"},a(e.autospinning?"Stop":"Autospin"),1)])]),t("div",N,[F,t("div",C,[t("div",O,[t("div",E,[I,W,t("div",D,a((1/Math.pow(this.slotValues.length,this.slotAmount)*100).toFixed(2))+"% ",1),Y]),t("div",q,[G,H,t("div",J,a((1/Math.pow(this.slotValues.length,this.slotAmount)*100).toFixed(2))+"% ",1),K]),t("div",Q,[U,X,t("div",Z,a(((1-(Math.pow(this.slotValues.length-1,this.slotAmount)+Math.pow(this.slotValues.length-1,this.slotAmount-1)*this.slotAmount)/Math.pow(this.slotValues.length,this.slotAmount))*100).toFixed(2))+"% ",1),tt])])])])])])}const ot=_(M,[["render",st]]);export{ot as default};
