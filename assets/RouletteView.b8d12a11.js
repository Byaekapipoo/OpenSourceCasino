import{P as S,B as y}from"./BetSelectButton.d3f4c30d.js";import{A as B,I as R}from"./AutospinButton.8452d2fb.js";import{_ as m,o as w,c as b,r as h,b as n,t as _,e as c,w as f,n as g,g as C,p as P,a as I}from"./index.a61eeda9.js";const M={data(){return{canvasCtx:void 0,canvas:void 0,spinning:!1,canvasRadius:.5,offset:.05,fieldCount:20,ballSize:.05,initialMoveDelay:10,moveDelayDelta:10}},mounted(){this.canvas=this.$refs.roulette,this.canvasCtx=this.canvas.getContext("2d"),window.addEventListener("resize",this.rescaleCanvas),this.rescaleCanvas();const t=this.canvas.width;this.drawFreshWheel(t,t*this.canvasRadius,t/2,t/2)},methods:{spin(){this.spinning=!0;const t=this.canvas.width;let s=this.canvasRadius*t;const i=t/2,a=t/2;let e=0;const o=this.drawWheelWithBall,l=this.moveDelayDelta,r=Math.floor(Math.random()*101)+200;return new Promise((d,v)=>{function u(p){if(p>=r)return d(e%2==0?"black":"red");o(t,s,i,a,e++),setTimeout(u,p,p+l*Math.floor(Math.random()*2))}u(this.initialMoveDelay)})},drawWheelWithBall(t,s,i,a,e){this.drawFreshWheel(t,s,i,a),this.canvasCtx.fillStyle="white",this.canvasCtx.beginPath();const o=(s-t*this.ballSize*2)*Math.sin(2*Math.PI*e/this.fieldCount)+i,l=(s-t*this.ballSize*2)*Math.cos(2*Math.PI*e/this.fieldCount)+a;this.canvasCtx.arc(o,l,t*this.ballSize,0,2*Math.PI),this.canvasCtx.fill()},rescaleCanvas(){if(this.spinning)return;this.canvas.width=window.innerHeight/3.5,this.canvas.height=window.innerHeight/3.5;const t=this.canvas.height;this.drawFreshWheel(t,t*this.canvasRadius,t/2,t/2)},drawFreshWheel(t,s,i,a){this.canvasCtx.fillStyle="black",this.canvasCtx.beginPath(),this.canvasCtx.arc(i,a,s,0,2*Math.PI,!1),this.canvasCtx.fill(),s-=t*this.offset;let e=1/this.fieldCount*Math.PI;for(let o=0;o<this.fieldCount;o++){const l=1/this.fieldCount*2*Math.PI;this.canvasCtx.beginPath(),this.canvasCtx.arc(i,a,s,e,e+l),e+=l,this.canvasCtx.lineTo(i,a),o%2==0?this.canvasCtx.fillStyle="red":this.canvasCtx.fillStyle="black",this.canvasCtx.fill()}}}},W={ref:"roulette"};function k(t,s,i,a,e,o){return w(),b("canvas",W,null,512)}const $=m(M,[["render",k],["__scopeId","data-v-e46a698b"]]);const D={props:["points"],data(){return{rouletteBets:[1e5,2e5],autospinning:!1,lastReward:0,spinning:!1,colors:["red","black"]}},components:{PlayButton:S,BetSelectButton:y,AutospinButton:B,Roulette:$,InfoSection:R},methods:{spinRoulette(){if(this.spinning)return;const t=this.$refs.betSelect.$data.value;if(this.$props.points-t<0){this.autospinning=!1;return}this.spinning=!0,this.$emit("changePoints",-t);const s=this.$refs.colorSelect.$data.value;this.$refs.roulette.spin().then(i=>{i==s?(this.$emit("changePoints",t*1.5),this.lastReward=t*1.5):this.lastReward=0,this.spinning=!1})}},watch:{autospinning:function(){!this.spinning&&this.autospinning&&this.spinRoulette()},spinning:function(){!this.spinning&&this.autospinning&&setTimeout(this.spinRoulette,1e3)}}},x=t=>(P("data-v-c585532b"),t=t(),I(),t),z={id:"lastReward"},A={id:"options"},T=x(()=>n("h2",null,"Loot table",-1)),V=x(()=>n("table",null,[n("tr",null,[n("th",null,"Color selected and received"),n("th",null,"Theoretical Chance"),n("th",null,"Reward")]),n("tr",null,[n("td",null,"black"),n("td",null,_(50)+"%"),n("td",null,"original bet x 1.5")]),n("tr",null,[n("td",null,"red"),n("td",null,_(50)+"%"),n("td",null,"original bet x 1.5")])],-1));function F(t,s,i,a,e,o){const l=h("Roulette"),r=h("BetSelectButton"),d=h("PlayButton"),v=h("AutospinButton"),u=h("InfoSection");return w(),b("main",null,[n("p",z,"Last reward: "+_(e.lastReward),1),c(l,{ref:"roulette"},null,512),n("div",A,[c(r,{bets:e.rouletteBets,id:"betSelect",ref:"betSelect"},null,8,["bets"]),c(d,{style:g(e.spinning||e.autospinning?"pointer-events: none; opacity: 0.2":"pointer-events: auto"),onClick:o.spinRoulette},{default:f(()=>[C("Spin")]),_:1},8,["style","onClick"]),c(v,{onClick:s[0]||(s[0]=p=>e.autospinning=!e.autospinning),autospinning:e.autospinning,id:"autospinButton"},{default:f(()=>[C(" Autospin")]),_:1},8,["autospinning"])]),c(r,{style:g(e.spinning||e.autospinning?"pointer-events: none; opacity: 0.2":"pointer-events: auto"),bets:e.colors,id:"colorSelect",ref:"colorSelect"},null,8,["style","bets"]),c(u,null,{default:f(()=>[T,V]),_:1})])}const H=m(D,[["render",F],["__scopeId","data-v-c585532b"]]);export{H as default};
